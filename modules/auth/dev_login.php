<?php require_once __DIR__.'/../../inc/config.php'; $username=trim($_POST['username']??''); $name=trim($_POST['name']??''); $role=strtoupper(trim($_POST['role']??'USER')); $line_user_id=trim($_POST['line_user_id']??''); if(!$username||!$name){ header('Location: login.php'); exit; } $_SESSION['user']=['id'=>0,'sso_username'=>$username,'name'=>$name,'email'=>$username.'@example.local','role'=>in_array($role,['ADMIN','USER'])?$role:'USER','line_user_id'=>$line_user_id]; header('Location: ../../public/index.php');